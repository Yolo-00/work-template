import{g as p,w as I}from"./index-BnHVDNur.js";import{e as _,a5 as u,f as L,o as R,Q as D,h as v,D as b,v as h,a6 as w,r as U,a7 as k,j as r,a8 as Q,i as E,u as f,t as $,U as H}from"./vendor-CsRNJ8dC.js";const N=["id"],P=_({__name:"index",props:{type:{default:"img"},size:{default:200},iconSize:{default:40},content:{},logo:{},options:{},errorLevel:{default:"H"}},setup(m,{expose:l}){const e=m,n=u(""),g=u("canvas"+p()),d=u(!0),i=L(()=>({width:e.size+"px",height:e.size+"px"})),y=async()=>{if(e.type==="canvas"){const o=await w.toCanvas(document.getElementById(g.value),e.content,{width:e.size,margin:2,errorCorrectionLevel:e.errorLevel,...e.options});if(e.logo){const a=o.getContext("2d"),t=e.iconSize+5,s=e.iconSize+5,C=(o.width-t)/2,S=(o.width-s)/2;a.fillStyle="#fff",a.fillRect(C,S,t,s);const x=(o.width-e.iconSize)/2,B=(o.width-e.iconSize)/2,c=new Image;c.crossOrigin="Anonymous",c.onload=()=>{a.drawImage(c,x,B,e.iconSize,e.iconSize),n.value=o.toDataURL()},c.src=e.logo}else n.value=o.toDataURL();d.value=!1}else{const o=await w.toDataURL(e.content,{width:e.size,margin:2,errorCorrectionLevel:e.errorLevel,...e.options});n.value=o,d.value=!1}},z=(o=p(),a=".png")=>{const t=document.createElement("a");t.style.display="none",t.download=`${o}${a}`,t.href=n.value,document.body.appendChild(t),t.click(),document.body.removeChild(t)};return R(()=>{y()}),l({downLoadQRCode:z}),(o,a)=>{const t=U("ImagePreview"),s=k("loading");return D((r(),v("div",{style:h(i.value),"overflow-hidden":"","rounded-lg":"",border:"","border-slate-300":"","border-solid":""},[o.type==="img"?(r(),b(t,{key:0,width:i.value.width,height:i.value.height,"image-url":n.value},null,8,["width","height","image-url"])):(r(),v("canvas",{key:1,style:h(i.value),id:g.value},null,12,N))],4)),[[s,d.value]])}}}),V=I(P),j=_({__name:"index",setup(m){const{t:l}=Q();return(e,n)=>(r(),v("div",null,[E(f(V),{content:"www.baidu.com"}),$("div",null,H(f(l)("home.home")),1)]))}});export{j as default};
