import{e as L,a6 as b,h as D,i as e,u as o,j as I,a7 as q,a3 as G,a8 as N,Q as j,R as A,a9 as O,l as Q,aa as W,ab as X,r as a,v as l,Y,w as s,X as v,F as Z,Z as H,$ as J,ac as U,W as z}from"./vendor-C9rv7u7u.js";import{u as ee}from"./useLanguage-CKpihzGJ.js";import{w as oe,u as te,_ as ne}from"./index-BRFlJTpX.js";const se={account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},ae=L({__name:"index",props:{imageUrl:{},width:{default:320},height:{default:160}},setup(P,{expose:m}){const u=b(!1);let i;const p=()=>{r(),i&&i()},r=()=>{u.value=!1};return m({handleClose:r,open:c=>{c&&(i=c),u.value=!0}}),(c,_)=>(I(),D("div",null,[e(o(q),{imgs:[c.imageUrl],"canvas-width":c.width,"canvas-height":c.height,show:u.value,onClose:r,onSuccess:p},null,8,["imgs","canvas-width","canvas-height","show"])]))}}),le=oe(ae),ie=le,re={fixed:"","right-10":"","top-10":"",flex:"~ items-center"},ce={"mr-4":""},de={class:"cursor-pointer"},ue={class:"login-bg",flex:"~ justify-center items-center",bg:"no-repeat cover center"},pe={"p-5":"","bg-white":"","dark:bg-black":"","rounded-lg":"","w-70":""},ge={"font-semibold":"","text-xl":"","text-center":"","mb-4":""},me="Ov23liyRpMRmQeOGgqel",$=2,fe=L({__name:"index",setup(P){const m=G(),{setLanguage:u}=ee(),{t:i}=N(),p=te(),r=j(),k=A(r),c="work-template",_=b(),x=b(),g=O({account:"admin",password:"123456"}),h=Q.debounce(()=>{var n;(n=x.value)==null||n.validate(t=>{t&&_.value.open(()=>{p.setToken(new Date().getTime().toString()),m.replace("/")})})},500),T=`${location.origin}/#/login`,y=W("state",new Date().toLocaleString()),B=()=>{const n=`https://github.com/login/oauth/authorize?client_id=${me}&redirect_uri=${encodeURIComponent(T)}&scope=user&state=${y.value}`;window.open(n,"oauthWindow","width=600,height=700")&&window.addEventListener("message",V,!1)},V=n=>{const{code:t,state:w}=n.data;t&&w&&(p.setToken(t||""),m.replace("/")),window.removeEventListener("message",V)};return X(()=>{const n=new URLSearchParams(location.search);n.get("code")&&n.get("state")&&(n.get("code"),n.get("state"),y.value,$===1?(p.setToken(new URLSearchParams(location.search).get("code")||""),window.location.href=location.origin):$===2&&(window.opener.postMessage({code:n.get("code"),state:n.get("state")},location.origin),window.close()))}),(n,t)=>{const w=a("el-switch"),E=a("SvgIcon"),C=a("el-dropdown-item"),K=a("el-dropdown-menu"),F=a("el-dropdown"),R=a("el-input"),f=a("el-form-item"),S=a("el-button"),M=a("el-form");return I(),D(Z,null,[l("div",re,[l("div",ce,[e(w,{width:45,modelValue:o(r),"onUpdate:modelValue":t[0]||(t[0]=d=>Y(r)?r.value=d:null),"inline-prompt":"","active-icon":o(H),"inactive-icon":o(J),onChange:o(k)},null,8,["modelValue","active-icon","inactive-icon","onChange"])]),l("div",null,[e(F,null,{dropdown:s(()=>[e(K,null,{default:s(()=>[e(C,null,{default:s(()=>[l("div",{class:"px-4",onClick:t[1]||(t[1]=d=>o(u)("en"))},"English")]),_:1}),e(C,{divided:""},{default:s(()=>[l("div",{class:"px-4",onClick:t[2]||(t[2]=d=>o(u)("zh"))},"简体中文")]),_:1})]),_:1})]),default:s(()=>[l("div",de,[e(E,{color:"#333","icon-style":{width:"20px",height:"20px"},name:"language"})])]),_:1})])]),l("div",ue,[l("div",pe,[l("div",ge,v(o(c)),1),e(M,{ref_key:"formRef",ref:x,model:g,rules:o(se)},{default:s(()=>[e(f,{prop:"account"},{default:s(()=>[e(R,{modelValue:g.account,"onUpdate:modelValue":t[3]||(t[3]=d=>g.account=d),"prefix-icon":"UserFilled",clearable:"",placeholder:o(i)("login.account"),onKeyup:U(o(h),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),e(f,{prop:"password"},{default:s(()=>[e(R,{modelValue:g.password,"onUpdate:modelValue":t[4]||(t[4]=d=>g.password=d),"prefix-icon":"lock",clearable:"",placeholder:o(i)("login.password"),"show-password":"",onKeyup:U(o(h),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),e(f,null,{default:s(()=>[e(S,{type:"primary","w-full":"",onClick:o(h)},{default:s(()=>[z(v(o(i)("login.login")),1)]),_:1},8,["onClick"])]),_:1}),e(f,null,{default:s(()=>[e(S,{type:"info","w-full":"",onClick:B},{default:s(()=>[z(v(o(i)("login.auth")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),e(o(ie),{ref_key:"puzzleVerifyRef",ref:_},null,512)],64)}}}),ve=ne(fe,[["__scopeId","data-v-faf2fc48"]]);export{ve as default};
