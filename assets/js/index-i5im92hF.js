import{_ as U,w as V}from"./index-Cxq15YxB.js";import{e as Y,a8 as s,ap as H,aq as N,j as $,h as I,v as y,ar as P,x as M,r as W,Z as b,i as w,u as h}from"./vendor-OB9N_iEr.js";import{A as q}from"./avatar-CzJ1fSed.js";import{l as z}from"./login-bg-E4Xv8Klu.js";const G=["src"],Z=Y({__name:"index",props:{src:{},width:{default:200},height:{default:200},draggable:{type:Boolean,default:!0},initialPosition:{default:void 0}},emits:["positionChange"],setup(L,{emit:d}){const o=L,l=d,v=s(),i=s(),n=s(!1),t=s({x:0,y:0}),u=s({x:0,y:0}),c=s(!1),g=s({height:"100%",width:"auto"}),R=()=>{if(o.initialPosition){t.value=o.initialPosition;return}t.value={x:0,y:0},l("positionChange",t.value)},E=(e,a)=>{if(v.value&&i.value){const m=i.value,j=0,k=o.width-m.offsetWidth,S=0,T=o.height-m.offsetHeight,C={x:Math.min(j,Math.max(k,e)),y:Math.min(S,Math.max(T,a))};t.value=C,l("positionChange",C)}},f=e=>{if(!n.value||!i.value)return;const a=e.clientX-u.value.x,r=e.clientY-u.value.y;E(a,r)},p=e=>{if(!n.value||!i.value)return;e.preventDefault();const a=e.touches[0],r=a.clientX-u.value.x,m=a.clientY-u.value.y;E(r,m)},x=()=>{n.value=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",x)},_=()=>{n.value=!1,document.removeEventListener("touchmove",p),document.removeEventListener("touchend",_)},A=e=>{o.draggable&&(n.value=!0,u.value={x:e.clientX-t.value.x,y:e.clientY-t.value.y},document.addEventListener("mousemove",f),document.addEventListener("mouseup",x))},B=e=>{if(!o.draggable)return;e.preventDefault();const a=e.touches[0];n.value=!0,u.value={x:a.clientX-t.value.x,y:a.clientY-t.value.y},document.addEventListener("touchmove",p),document.addEventListener("touchend",_)},D=()=>{const e=i.value;if(!e)return;const a=e.naturalWidth/e.naturalHeight,r=o.width/o.height;a>r?g.value={height:"100%",width:"auto"}:g.value={width:"100%",height:"auto"},c.value=!0,R()};return H(()=>o.initialPosition,e=>{e&&c.value&&(t.value=e,l("positionChange",e))},{deep:!0}),N(()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",_)}),(e,a)=>($(),I("div",{ref_key:"containerRef",ref:v,class:"draggable-container",style:M({width:`${e.width}px`,height:`${e.height}px`})},[y("img",{ref_key:"imgRef",ref:i,src:e.src,onLoad:D,onMousedown:P(A,["prevent"]),onTouchstart:P(B,["prevent"]),style:M({...g.value,transform:`translate3d(${t.value.x}px, ${t.value.y}px, 0)`,opacity:c.value?1:0,cursor:e.draggable?"move":"default","will-change":n.value?"transform":"auto"})},null,44,G)],4))}}),F=U(Z,[["__scopeId","data-v-a1409176"]]),J=V(F),X=J,K={class:"text-lg"},O={class:"text-lg mt-5"},ne=Y({__name:"index",setup(L){const d=s(void 0),o=s(void 0),l=s(!0),v=n=>{d.value=n},i=n=>{o.value=n};return(n,t)=>{const u=W("el-switch");return $(),I("div",null,[y("div",K,b(d.value),1),w(u,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=c=>l.value=c),class:"mt-5","active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"]),w(h(X),{src:h(z),draggable:l.value,width:1e3,height:300,onPositionChange:v},null,8,["src","draggable"]),y("div",O,b(o.value),1),w(h(X),{class:"mt-5",src:h(q),width:500,height:400,onPositionChange:i},null,8,["src"])])}}});export{ne as default};
