import{g as R,w as A}from"./index-Bm038RHZ.js";import{e as L,M as d,f as O,o as U,a0 as $,h,D as M,v as I,a7 as b,r as Q,a8 as V,j as p,a9 as N,C as W,u as x,G as E,aa as j,B as D,i as k,ab as T,Q as F,t as H,W as P}from"./vendor-DEDRH-kP.js";const X=["id"],Y=L({__name:"index",props:{type:{default:"img"},size:{default:200},iconSize:{default:40},content:{},logo:{},options:{},errorLevel:{default:"H"}},setup(w,{expose:n}){const e=w,i=d(""),r=d("canvas"+R()),g=d(!0),m=O(()=>({width:e.size+"px",height:e.size+"px"})),f=async()=>{if(e.type==="canvas"){const o=await b.toCanvas(document.getElementById(r.value),e.content,{width:e.size,margin:2,errorCorrectionLevel:e.errorLevel,...e.options});if(e.logo){const l=o.getContext("2d"),t=e.iconSize+5,u=e.iconSize+5,_=(o.width-t)/2,B=(o.width-u)/2;l.fillStyle="#fff",l.fillRect(_,B,t,u);const C=(o.width-e.iconSize)/2,S=(o.width-e.iconSize)/2,v=new Image;v.crossOrigin="Anonymous",v.onload=()=>{l.drawImage(v,C,S,e.iconSize,e.iconSize),i.value=o.toDataURL()},v.src=e.logo}else i.value=o.toDataURL();g.value=!1}else{const o=await b.toDataURL(e.content,{width:e.size,margin:2,errorCorrectionLevel:e.errorLevel,...e.options});i.value=o,g.value=!1}},c=(o=R(),l=".png")=>{const t=document.createElement("a");t.style.display="none",t.download=`${o}${l}`,t.href=i.value,document.body.appendChild(t),t.click(),document.body.removeChild(t)};return U(()=>{f()}),n({downLoadQRCode:c}),(o,l)=>{const t=Q("ImagePreview"),u=V("loading");return $((p(),h("div",{style:I(m.value),"overflow-hidden":"","rounded-lg":"",border:"","border-slate-300":"","border-solid":""},[o.type==="img"?(p(),M(t,{key:0,width:m.value.width,height:m.value.height,"image-url":i.value},null,8,["width","height","image-url"])):(p(),h("canvas",{key:1,style:I(m.value),id:r.value},null,12,X))],4)),[[u,g.value]])}}}),q=A(Y),G=["id"],J=L({__name:"index",props:{initOptions:{},options:{},width:{default:500},height:{default:500},customStyle:{},getApi:{},getChangeData:{},isRealTimeUpdate:{type:Boolean,default:!1},realTime:{default:300},isEmpty:{type:Boolean,default:!1}},setup(w){const n=w,{initOptions:e,getApi:i,getChangeData:r,realTime:g,isRealTimeUpdate:m}=n,f=d(),c=d(),o=R(),l=d(!1),t=d(!1),u=a=>{const{series:s}=a||{series:[]};return s.length>0&&s.every(y=>y.data.length>0)},_=O(()=>({...n.customStyle,width:n.width+"px",height:n.height+"px"}));N(()=>n.options,async()=>{u(n.options)&&(t.value=!0,await D(),c.value?C():B())},{deep:!0,immediate:!0});const B=()=>{const{theme:a,opts:s}=e||{theme:null,opts:{}};c.value=T(document.getElementById(o),a,s),C()},C=async()=>{var a;(a=c.value)==null||a.setOption(n.options||{})},S=a=>{var s;if(!c.value){const{theme:y,opts:z}=e||{theme:null,opts:{}};c.value=T(document.getElementById(o),y,z)}(s=c.value)==null||s.setOption(a)},v=async()=>{if(!(!i||!r))try{l.value=!0;const a=await i();l.value=!1,u(r(a))&&(t.value=!0,await D(),S(r(a))),m&&(f.value=setInterval(async()=>{const s=await i();u(r(s))&&(t.value||(t.value=!0,await D()),S(r(s)))},g*1e3))}catch{}};return U(()=>{v()}),W(()=>{f.value&&clearInterval(f.value)}),(a,s)=>{const y=Q("el-empty"),z=V("loading");return p(),h("div",null,[t.value||!a.isEmpty?(p(),h("div",{key:0,id:x(o),style:I(_.value)},null,12,G)):E("",!0),!t.value&&a.isEmpty?$((p(),h("div",{key:1,style:I(_.value),class:"flex items-center justify-center"},[j(a.$slots,"default",{},()=>[k(y,{description:"暂无数据"})])],4)),[[z,l.value]]):E("",!0)])}}}),K=A(J),te=L({__name:"index",setup(w){const{t:n}=F(),e=d({xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[],type:"line"}]});return U(()=>{setTimeout(()=>{e.value.series[0].data=[250,130,254,218,135,147,660]},2e3)}),(i,r)=>(p(),h("div",null,[k(x(q),{content:"www.baidu.com"}),H("div",null,P(x(n)("home.home")),1),k(x(K),{options:e.value},null,8,["options"])]))}});export{te as default};
