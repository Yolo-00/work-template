import{g as R,w as O}from"./index-C6_NVFBl.js";import{e as L,M as d,f as $,o as U,a0 as E,h,D as M,v as I,a7 as b,r as Q,a8 as V,j as p,a9 as N,C as W,u as x,G as T,aa as j,B as D,i as k,ab as A,Q as F,t as H,W as P}from"./vendor-yV4zkE9G.js";const X=["id"],Y=L({__name:"index",props:{type:{default:"img"},size:{default:200},iconSize:{default:40},content:{},logo:{},options:{},errorLevel:{default:"H"}},setup(w,{expose:n}){const e=w,i=d(""),r=d("canvas"+R()),g=d(!0),v=$(()=>({width:e.size+"px",height:e.size+"px"})),f=async()=>{if(e.type==="canvas"){const o=await b.toCanvas(document.getElementById(r.value),e.content,{width:e.size,margin:2,errorCorrectionLevel:e.errorLevel,...e.options});if(e.logo){const l=o.getContext("2d"),t=e.iconSize+5,u=e.iconSize+5,_=(o.width-t)/2,B=(o.width-u)/2;l.fillStyle="#fff",l.fillRect(_,B,t,u);const C=(o.width-e.iconSize)/2,S=(o.width-e.iconSize)/2,m=new Image;m.crossOrigin="Anonymous",m.onload=()=>{l.drawImage(m,C,S,e.iconSize,e.iconSize),i.value=o.toDataURL()},m.src=e.logo}else i.value=o.toDataURL();g.value=!1}else{const o=await b.toDataURL(e.content,{width:e.size,margin:2,errorCorrectionLevel:e.errorLevel,...e.options});i.value=o,g.value=!1}},c=(o=R(),l=".png")=>{const t=document.createElement("a");t.style.display="none",t.download=`${o}${l}`,t.href=i.value,document.body.appendChild(t),t.click(),document.body.removeChild(t)};return U(()=>{f()}),n({downLoadQRCode:c}),(o,l)=>{const t=Q("ImagePreview"),u=V("loading");return E((p(),h("div",{style:I(v.value),"overflow-hidden":"","rounded-lg":"",border:"","border-slate-300":"","border-solid":""},[o.type==="img"?(p(),M(t,{key:0,width:v.value.width,height:v.value.height,"image-url":i.value},null,8,["width","height","image-url"])):(p(),h("canvas",{key:1,style:I(v.value),id:r.value},null,12,X))],4)),[[u,g.value]])}}}),q=O(Y),G=["id"],J=L({__name:"index",props:{initOptions:{},options:{},width:{default:500},height:{default:500},customStyle:{},getApi:{},getChangeData:{},isRealTimeUpdate:{type:Boolean,default:!1},realTime:{default:300}},setup(w){const n=w,{initOptions:e,getApi:i,getChangeData:r,realTime:g,isRealTimeUpdate:v}=n,f=d(),c=d(),o=R(),l=d(!1),t=d(!1),u=a=>{const{series:s}=a||{series:[]};return s.length>0&&s.every(y=>y.data.length>0)},_=$(()=>({...n.customStyle,width:n.width+"px",height:n.height+"px"}));N(()=>n.options,async()=>{u(n.options)&&(t.value=!0,await D(),c.value?C():B())},{deep:!0,immediate:!0});const B=()=>{const{theme:a,opts:s}=e||{theme:null,opts:{}};c.value=A(document.getElementById(o),a,s),C()},C=async()=>{var a;(a=c.value)==null||a.setOption(n.options||{})},S=a=>{var s;if(!c.value){const{theme:y,opts:z}=e||{theme:null,opts:{}};c.value=A(document.getElementById(o),y,z)}(s=c.value)==null||s.setOption(a)},m=async()=>{if(!(!i||!r))try{l.value=!0;const a=await i();l.value=!1,u(r(a))&&(t.value=!0,await D(),S(r(a))),v&&(f.value=setInterval(async()=>{const s=await i();u(r(s))&&(t.value||(t.value=!0,await D()),S(r(s)))},g*1e3))}catch{}};return U(()=>{m()}),W(()=>{f.value&&clearInterval(f.value)}),(a,s)=>{const y=Q("el-empty"),z=V("loading");return p(),h("div",null,[t.value?(p(),h("div",{key:0,id:x(o),style:I(_.value)},null,12,G)):T("",!0),t.value?T("",!0):E((p(),h("div",{key:1,style:I(_.value),class:"flex items-center justify-center"},[j(a.$slots,"default",{},()=>[k(y,{description:"暂无数据"})])],4)),[[z,l.value]])])}}}),K=O(J),te=L({__name:"index",setup(w){const{t:n}=F(),e=d({xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[],type:"line"}]});return U(()=>{setTimeout(()=>{e.value.series[0].data=[250,130,254,218,135,147,660]},2e3)}),(i,r)=>(p(),h("div",null,[k(x(q),{content:"www.baidu.com"}),H("div",null,P(x(n)("home.home")),1),k(x(K),{options:e.value},null,8,["options"])]))}});export{te as default};
