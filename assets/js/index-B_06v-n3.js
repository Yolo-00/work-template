import{e as D,a5 as b,h as I,i as L,j as e,u as o,a6 as M,a2 as q,a7 as G,Q as N,R as j,a8 as A,l as O,a9 as Q,aa as W,v as l,X,w as s,W as v,F as Y,r as a,Y as Z,Z as H,ab as U,V as z}from"./vendor-Cx30SBEr.js";import{u as J}from"./useLanguage-C6NKwP8M.js";import{w as ee,u as oe,_ as te}from"./index-C_HJbNaf.js";const ne={account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},se=D({__name:"index",props:{imageUrl:{},width:{default:320},height:{default:160}},setup($,{expose:m}){const u=b(!1);let i;const g=()=>{r(),i&&i()},r=()=>{u.value=!1};return m({handleClose:r,open:c=>{c&&(i=c),u.value=!0}}),(c,f)=>(I(),L("div",null,[e(o(M),{imgs:[c.imageUrl],"canvas-width":c.width,"canvas-height":c.height,show:u.value,onClose:r,onSuccess:g},null,8,["imgs","canvas-width","canvas-height","show"])]))}}),le=ee(se),ae={fixed:"","right-10":"","top-10":"",flex:"~ items-center"},ie={"mr-4":""},re={class:"cursor-pointer"},ce={class:"login-bg",flex:"~ justify-center items-center",bg:"no-repeat cover center"},de={"p-5":"","bg-white":"","dark:bg-black":"","rounded-lg":"","w-70":""},ue={"font-semibold":"","text-xl":"","text-center":"","mb-4":""},pe="Ov23liyRpMRmQeOGgqel",me=D({__name:"index",setup($){const m=q(),{setLanguage:u}=J(),{t:i}=G(),g=oe(),r=N(),x=j(r),c="work-template",f=b(),k=b(),p=A({account:"admin",password:"123456"}),h=O.debounce(()=>{var n;(n=k.value)==null||n.validate(t=>{t&&f.value.open(()=>{g.setToken(new Date().getTime().toString()),m.replace("/")})})},500),B=`${location.origin}/#/login`,y=Q("state",new Date().toLocaleString()),E=()=>{const n=`https://github.com/login/oauth/authorize?client_id=${pe}&redirect_uri=${encodeURIComponent(B)}&scope=user&state=${y.value}`;window.open(n,"oauthWindow","width=600,height=700")&&window.addEventListener("message",V,!1)},V=n=>{const{code:t,state:w}=n.data;t&&w&&(g.setToken(t||""),m.replace("/"),window.removeEventListener("message",V))};return W(()=>{const n=new URLSearchParams(location.search);n.get("code")&&n.get("state")&&(n.get("code"),n.get("state"),y.value,window.opener.postMessage({code:n.get("code"),state:n.get("state")},location.origin),window.close())}),(n,t)=>{const w=a("el-switch"),K=a("SvgIcon"),C=a("el-dropdown-item"),P=a("el-dropdown-menu"),T=a("el-dropdown"),R=a("el-input"),_=a("el-form-item"),S=a("el-button"),F=a("el-form");return I(),L(Y,null,[l("div",ae,[l("div",ie,[e(w,{width:45,modelValue:o(r),"onUpdate:modelValue":t[0]||(t[0]=d=>X(r)?r.value=d:null),"inline-prompt":"","active-icon":o(Z),"inactive-icon":o(H),onChange:o(x)},null,8,["modelValue","active-icon","inactive-icon","onChange"])]),l("div",null,[e(T,null,{dropdown:s(()=>[e(P,null,{default:s(()=>[e(C,null,{default:s(()=>[l("div",{class:"px-4",onClick:t[1]||(t[1]=d=>o(u)("en"))},"English")]),_:1}),e(C,{divided:""},{default:s(()=>[l("div",{class:"px-4",onClick:t[2]||(t[2]=d=>o(u)("zh"))},"简体中文")]),_:1})]),_:1})]),default:s(()=>[l("div",re,[e(K,{color:"#333","icon-style":{width:"20px",height:"20px"},name:"language"})])]),_:1})])]),l("div",ce,[l("div",de,[l("div",ue,v(o(c)),1),e(F,{ref_key:"formRef",ref:k,model:p,rules:o(ne)},{default:s(()=>[e(_,{prop:"account"},{default:s(()=>[e(R,{modelValue:p.account,"onUpdate:modelValue":t[3]||(t[3]=d=>p.account=d),"prefix-icon":"UserFilled",clearable:"",placeholder:o(i)("login.account"),onKeyup:U(o(h),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),e(_,{prop:"password"},{default:s(()=>[e(R,{modelValue:p.password,"onUpdate:modelValue":t[4]||(t[4]=d=>p.password=d),"prefix-icon":"lock",clearable:"",placeholder:o(i)("login.password"),"show-password":"",onKeyup:U(o(h),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),e(_,null,{default:s(()=>[e(S,{type:"primary","w-full":"",onClick:o(h)},{default:s(()=>[z(v(o(i)("login.login")),1)]),_:1},8,["onClick"])]),_:1}),e(_,null,{default:s(()=>[e(S,{type:"info","w-full":"",onClick:E},{default:s(()=>[z(v(o(i)("login.auth")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),e(o(le),{ref_key:"puzzleVerifyRef",ref:f},null,512)],64)}}}),he=te(me,[["__scopeId","data-v-067801bc"]]);export{he as default};
