import{e as D,a8 as b,h as I,i as e,u as o,j as P,a9 as G,a3 as N,a5 as j,Q as A,S as O,U as Q,aa as W,l as Y,ab as Z,ac as H,r as a,v as l,$ as J,w as s,Z as v,F as X,a0 as ee,a1 as oe,ad as z,Y as $}from"./vendor-OB9N_iEr.js";import{u as te}from"./useLanguage-DaDJneAH.js";import{w as ne,u as se,_ as ae}from"./index-Cxq15YxB.js";const le={account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},ie=D({__name:"index",props:{imageUrl:{},width:{default:320},height:{default:160}},setup(T,{expose:_}){const d=b(!1);let u;const p=()=>{r(),u&&u()},r=()=>{d.value=!1};return _({handleClose:r,open:i=>{i&&(u=i),d.value=!0}}),(i,y)=>(P(),I("div",null,[e(o(G),{imgs:[i.imageUrl],"canvas-width":i.width,"canvas-height":i.height,show:d.value,onClose:r,onSuccess:p},null,8,["imgs","canvas-width","canvas-height","show"])]))}}),re=ne(ie),ce=re,de={fixed:"","right-10":"","top-10":"",flex:"~ items-center"},ue={"mr-4":""},pe={class:"cursor-pointer"},ge={class:"login-bg",flex:"~ justify-center items-center",bg:"no-repeat cover center"},me={"p-5":"","bg-white":"","dark:bg-black":"","rounded-lg":"","w-70":""},fe={"font-semibold":"","text-xl":"","text-center":"","mb-4":""},_e="Ov23liyRpMRmQeOGgqel",L=2,he=D({__name:"index",setup(T){const _=N(),d=j(),{setLanguage:u}=te(),{t:p}=A(),r=se(),g=O(),i=Q(g),y="work-template",k=b(),x=b(),m=W({account:"admin",password:"123456"}),h=Y.debounce(()=>{var n;(n=x.value)==null||n.validate(t=>{t&&k.value.open(()=>{r.setToken(new Date().getTime().toString()),d.replace({path:"/",query:_.query})})})},500),q=`${location.origin}/#/login`,V=Z("state",new Date().toLocaleString()),B=()=>{const n=`https://github.com/login/oauth/authorize?client_id=${_e}&redirect_uri=${encodeURIComponent(q)}&scope=user&state=${V.value}`;window.open(n,"oauthWindow","width=600,height=700")&&window.addEventListener("message",C,!1)},C=n=>{const{code:t,state:w}=n.data;t&&w&&(r.setToken(t||""),d.replace("/")),window.removeEventListener("message",C)};return H(()=>{const n=new URLSearchParams(location.search);n.get("code")&&n.get("state")&&(n.get("code"),n.get("state"),V.value,L===1?(r.setToken(new URLSearchParams(location.search).get("code")||""),window.location.href=location.origin):L===2&&(window.opener.postMessage({code:n.get("code"),state:n.get("state")},location.origin),window.close()))}),(n,t)=>{const w=a("el-switch"),E=a("SvgIcon"),S=a("el-dropdown-item"),K=a("el-dropdown-menu"),F=a("el-dropdown"),R=a("el-input"),f=a("el-form-item"),U=a("el-button"),M=a("el-form");return P(),I(X,null,[l("div",de,[l("div",ue,[e(w,{width:45,modelValue:o(g),"onUpdate:modelValue":t[0]||(t[0]=c=>J(g)?g.value=c:null),"inline-prompt":"","active-icon":o(ee),"inactive-icon":o(oe),onChange:o(i)},null,8,["modelValue","active-icon","inactive-icon","onChange"])]),l("div",null,[e(F,null,{dropdown:s(()=>[e(K,null,{default:s(()=>[e(S,null,{default:s(()=>[l("div",{class:"px-4",onClick:t[1]||(t[1]=c=>o(u)("en"))},"English")]),_:1}),e(S,{divided:""},{default:s(()=>[l("div",{class:"px-4",onClick:t[2]||(t[2]=c=>o(u)("zh"))},"简体中文")]),_:1})]),_:1})]),default:s(()=>[l("div",pe,[e(E,{color:"#333","icon-style":{width:"20px",height:"20px"},name:"language"})])]),_:1})])]),l("div",ge,[l("div",me,[l("div",fe,v(o(y)),1),e(M,{ref_key:"formRef",ref:x,model:m,rules:o(le)},{default:s(()=>[e(f,{prop:"account"},{default:s(()=>[e(R,{modelValue:m.account,"onUpdate:modelValue":t[3]||(t[3]=c=>m.account=c),"prefix-icon":"UserFilled",clearable:"",placeholder:o(p)("login.account"),onKeyup:z(o(h),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),e(f,{prop:"password"},{default:s(()=>[e(R,{modelValue:m.password,"onUpdate:modelValue":t[4]||(t[4]=c=>m.password=c),"prefix-icon":"lock",clearable:"",placeholder:o(p)("login.password"),"show-password":"",onKeyup:z(o(h),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),e(f,null,{default:s(()=>[e(U,{type:"primary","w-full":"",onClick:o(h)},{default:s(()=>[$(v(o(p)("login.login")),1)]),_:1},8,["onClick"])]),_:1}),e(f,null,{default:s(()=>[e(U,{type:"info","w-full":"",onClick:B},{default:s(()=>[$(v(o(p)("login.auth")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),e(o(ce),{ref_key:"puzzleVerifyRef",ref:k},null,512)],64)}}}),ye=ae(he,[["__scopeId","data-v-5a3b9dbd"]]);export{ye as default};
