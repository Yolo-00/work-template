import{e as I,a5 as k,h as L,i as e,u as o,j as $,a7 as q,Z as G,a6 as N,O,P as j,a8 as A,a9 as W,aa as Q,t as l,V as X,w as s,U as b,F as Z,r as a,W as H,X as J,ab as z,S as D}from"./vendor-tduSOmKd.js";import{u as Y}from"./useLanguage-uBAfc9XG.js";import{w as ee,u as oe,_ as te}from"./index-C1ILFQut.js";const ne={account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},se=I({__name:"index",props:{imageUrl:{},width:{default:320},height:{default:160}},setup(P,{expose:m}){const u=k(!1);let i;const g=()=>{r(),i&&i()},r=()=>{u.value=!1};return m({handleClose:r,open:c=>{c&&(i=c),u.value=!0}}),(c,h)=>($(),L("div",null,[e(o(q),{imgs:[c.imageUrl],"canvas-width":c.width,"canvas-height":c.height,show:u.value,onClose:r,onSuccess:g},null,8,["imgs","canvas-width","canvas-height","show"])]))}}),le=ee(se),ae={fixed:"","right-10":"","top-10":"",flex:"~ items-center"},ie={"mr-4":""},re={class:"cursor-pointer"},ce={class:"login-bg",flex:"~ justify-center items-center",bg:"no-repeat cover center"},de={"p-5":"","bg-white":"","dark:bg-black":"","rounded-lg":"","w-70":""},ue={"font-semibold":"","text-xl":"","text-center":"","mb-4":""},pe="Ov23liyRpMRmQeOGgqel",me=I({__name:"index",setup(P){const m=G(),{setLanguage:u}=Y(),{t:i}=N(),g=oe(),r=O(),x=j(r),c="work-template",h=k(),y=k(),p=A({account:"admin",password:"123456"}),w=_.debounce(()=>{var n;(n=y.value)==null||n.validate(t=>{t&&h.value.open(()=>{g.setToken(new Date().getTime().toString()),m.replace("/")})})},500),B=`${location.origin}/#/login`,V=W("state",new Date().toLocaleString()),K=()=>{const n=`https://github.com/login/oauth/authorize?client_id=${pe}&redirect_uri=${encodeURIComponent(B)}&scope=user&state=${V.value}`;window.open(n,"oauthWindow","width=600,height=700")&&window.addEventListener("message",C,!1)},C=n=>{const{code:t,state:v}=n.data;t&&v&&(g.setToken(t||""),m.replace("/"),window.removeEventListener("message",C))};return Q(()=>{const n=new URLSearchParams(location.search);n.get("code")&&n.get("state")&&(n.get("code"),n.get("state"),V.value,window.opener.postMessage({code:n.get("code"),state:n.get("state")},location.origin),window.close())}),(n,t)=>{const v=a("el-switch"),T=a("SvgIcon"),S=a("el-dropdown-item"),E=a("el-dropdown-menu"),F=a("el-dropdown"),R=a("el-input"),f=a("el-form-item"),U=a("el-button"),M=a("el-form");return $(),L(Z,null,[l("div",ae,[l("div",ie,[e(v,{width:45,modelValue:o(r),"onUpdate:modelValue":t[0]||(t[0]=d=>X(r)?r.value=d:null),"inline-prompt":"","active-icon":o(H),"inactive-icon":o(J),onChange:o(x)},null,8,["modelValue","active-icon","inactive-icon","onChange"])]),l("div",null,[e(F,null,{dropdown:s(()=>[e(E,null,{default:s(()=>[e(S,null,{default:s(()=>[l("div",{class:"px-4",onClick:t[1]||(t[1]=d=>o(u)("en"))},"English")]),_:1}),e(S,{divided:""},{default:s(()=>[l("div",{class:"px-4",onClick:t[2]||(t[2]=d=>o(u)("zh"))},"简体中文")]),_:1})]),_:1})]),default:s(()=>[l("div",re,[e(T,{color:"#333","icon-style":{width:"20px",height:"20px"},name:"language"})])]),_:1})])]),l("div",ce,[l("div",de,[l("div",ue,b(o(c)),1),e(M,{ref_key:"formRef",ref:y,model:p,rules:o(ne)},{default:s(()=>[e(f,{prop:"account"},{default:s(()=>[e(R,{modelValue:p.account,"onUpdate:modelValue":t[3]||(t[3]=d=>p.account=d),"prefix-icon":"UserFilled",clearable:"",placeholder:o(i)("login.account"),onKeyup:z(o(w),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),e(f,{prop:"password"},{default:s(()=>[e(R,{modelValue:p.password,"onUpdate:modelValue":t[4]||(t[4]=d=>p.password=d),"prefix-icon":"lock",clearable:"",placeholder:o(i)("login.password"),"show-password":"",onKeyup:z(o(w),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),e(f,null,{default:s(()=>[e(U,{type:"primary","w-full":"",onClick:o(w)},{default:s(()=>[D(b(o(i)("login.login")),1)]),_:1},8,["onClick"])]),_:1}),e(f,null,{default:s(()=>[e(U,{type:"info","w-full":"",onClick:K},{default:s(()=>[D(b(o(i)("login.auth")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),e(o(le),{ref_key:"puzzleVerifyRef",ref:h},null,512)],64)}}}),he=te(me,[["__scopeId","data-v-067801bc"]]);export{he as default};
