import{e as I,a5 as k,h as L,i as e,u as o,j as P,a7 as M,Z as q,a6 as G,O as N,P as O,a8 as j,a9 as A,aa as W,t as l,V as Q,w as s,U as b,F as X,r as a,W as Z,X as H,ab as z,S as D}from"./vendor-tduSOmKd.js";import{u as J}from"./useLanguage-O7HSC4SP.js";import{w as Y,u as ee,_ as oe}from"./index-DwWdx6EJ.js";const te={account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},ne=I({__name:"index",props:{imageUrl:{},width:{default:320},height:{default:160}},setup($,{expose:m}){const u=k(!1);let i;const g=()=>{r(),i&&i()},r=()=>{u.value=!1};return m({handleClose:r,open:c=>{c&&(i=c),u.value=!0}}),(c,h)=>(P(),L("div",null,[e(o(M),{imgs:[c.imageUrl],"canvas-width":c.width,"canvas-height":c.height,show:u.value,onClose:r,onSuccess:g},null,8,["imgs","canvas-width","canvas-height","show"])]))}}),se=Y(ne),le={fixed:"","right-10":"","top-10":"",flex:"~ items-center"},ae={"mr-4":""},ie={class:"cursor-pointer"},re={class:"login-bg",flex:"~ justify-center items-center",bg:"no-repeat cover center"},ce={"p-5":"","bg-white":"","dark:bg-black":"","rounded-lg":"","w-70":""},de={"font-semibold":"","text-xl":"","text-center":"","mb-4":""},ue="Ov23liyRpMRmQeOGgqel",pe="http://192.168.3.6:1103/#/login",me=I({__name:"index",setup($){const m=q(),{setLanguage:u}=J(),{t:i}=G(),g=ee(),r=N(),x=O(r),c="work-template",h=k(),y=k(),p=j({account:"admin",password:"123456"}),w=_.debounce(()=>{var n;(n=y.value)==null||n.validate(t=>{t&&h.value.open(()=>{g.setToken(new Date().getTime().toString()),m.replace("/")})})},500),V=A("state",new Date().toLocaleString()),B=()=>{const n=`https://github.com/login/oauth/authorize?client_id=${ue}&redirect_uri=${encodeURIComponent(pe)}&scope=user&state=${V.value}`;window.open(n,"oauthWindow","width=600,height=700")&&window.addEventListener("message",C,!1)},C=n=>{const{code:t,state:v}=n.data;t&&v&&(g.setToken(t||""),m.replace("/"),window.removeEventListener("message",C))};return W(()=>{const n=new URLSearchParams(location.search);n.get("code")&&n.get("state")&&(n.get("code"),n.get("state"),V.value,window.opener.postMessage({code:n.get("code"),state:n.get("state")},location.origin),window.close())}),(n,t)=>{const v=a("el-switch"),K=a("SvgIcon"),S=a("el-dropdown-item"),T=a("el-dropdown-menu"),E=a("el-dropdown"),R=a("el-input"),f=a("el-form-item"),U=a("el-button"),F=a("el-form");return P(),L(X,null,[l("div",le,[l("div",ae,[e(v,{width:45,modelValue:o(r),"onUpdate:modelValue":t[0]||(t[0]=d=>Q(r)?r.value=d:null),"inline-prompt":"","active-icon":o(Z),"inactive-icon":o(H),onChange:o(x)},null,8,["modelValue","active-icon","inactive-icon","onChange"])]),l("div",null,[e(E,null,{dropdown:s(()=>[e(T,null,{default:s(()=>[e(S,null,{default:s(()=>[l("div",{class:"px-4",onClick:t[1]||(t[1]=d=>o(u)("en"))},"English")]),_:1}),e(S,{divided:""},{default:s(()=>[l("div",{class:"px-4",onClick:t[2]||(t[2]=d=>o(u)("zh"))},"简体中文")]),_:1})]),_:1})]),default:s(()=>[l("div",ie,[e(K,{color:"#333","icon-style":{width:"20px",height:"20px"},name:"language"})])]),_:1})])]),l("div",re,[l("div",ce,[l("div",de,b(o(c)),1),e(F,{ref_key:"formRef",ref:y,model:p,rules:o(te)},{default:s(()=>[e(f,{prop:"account"},{default:s(()=>[e(R,{modelValue:p.account,"onUpdate:modelValue":t[3]||(t[3]=d=>p.account=d),"prefix-icon":"UserFilled",clearable:"",placeholder:o(i)("login.account"),onKeyup:z(o(w),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),e(f,{prop:"password"},{default:s(()=>[e(R,{modelValue:p.password,"onUpdate:modelValue":t[4]||(t[4]=d=>p.password=d),"prefix-icon":"lock",clearable:"",placeholder:o(i)("login.password"),"show-password":"",onKeyup:z(o(w),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),e(f,null,{default:s(()=>[e(U,{type:"primary","w-full":"",onClick:o(w)},{default:s(()=>[D(b(o(i)("login.login")),1)]),_:1},8,["onClick"])]),_:1}),e(f,null,{default:s(()=>[e(U,{type:"info","w-full":"",onClick:B},{default:s(()=>[D(b(o(i)("login.auth")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),e(o(se),{ref_key:"puzzleVerifyRef",ref:h},null,512)],64)}}}),he=oe(me,[["__scopeId","data-v-5c00caef"]]);export{he as default};
